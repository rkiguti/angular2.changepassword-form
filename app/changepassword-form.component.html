<form [formGroup]="changePasswordForm" (ngSubmit)="onChangePassword()">
    <div class="form-group">
        <label for="username">Username</label>
        <input type="text" name="username" id="username" class="form-control" formControlName="username">
        <div *ngIf="changePasswordForm.controls.username.touched && changePasswordForm.controls.username.errors">
            <div *ngIf="changePasswordForm.controls.username.errors.required" class="alert alert-danger">
                Username is required.
            </div>
            <div *ngIf="changePasswordForm.controls.username.errors.shouldBeValid" class="alert alert-danger">
                Username is incorrect.
            </div>
        </div>
        <div *ngIf="changePasswordForm.controls.username.pending">
            Checking username...
        </div>
    </div>
    <div class="form-group">
        <label for="oldPassword">Current password</label>
        <input type="password" name="oldPassword" id="oldPassword" class="form-control" formControlName="oldPassword">
        <div *ngIf="changePasswordForm.controls.oldPassword.touched && changePasswordForm.controls.oldPassword.errors">
            <div *ngIf="changePasswordForm.controls.oldPassword.errors.required" class="alert alert-danger">
                Old password is required.
            </div>
            <div *ngIf="changePasswordForm.controls.oldPassword.errors.validOldPassword" class="alert alert-danger">
                Old password is incorrect.
            </div>
        </div>
    </div>
    <div class="form-group">
        <label for="newPassword">New password</label>
        <input type="password" name="newPassword" id="newPassword" class="form-control" formControlName="newPassword">
        <div *ngIf="changePasswordForm.controls.newPassword.touched && changePasswordForm.controls.newPassword.errors">
            <div *ngIf="changePasswordForm.controls.newPassword.errors.required" class="alert alert-danger">
                New password is required.
            </div>
            <div *ngIf="changePasswordForm.controls.newPassword.errors.minlength" class="alert alert-danger">
                New password should be minimum {{ changePasswordForm.controls.newPassword.errors.minlength.requiredLength }} characters.
            </div>
        </div>
    </div>
    <div class="form-group">
        <label for="confirmPassword">Confirm password</label>
        <input type="password" name="confirmPassword" id="confirmPassword" class="form-control" formControlName="confirmPassword">
        <div *ngIf="changePasswordForm.controls.confirmPassword.touched && changePasswordForm.controls.confirmPassword.errors">
            <div *ngIf="changePasswordForm.controls.confirmPassword.errors.required" class="alert alert-danger">
                Confirm password is required.
            </div>
        </div>
        <div *ngIf="changePasswordForm.errors && changePasswordForm.errors.confirmPasswordShouldMatch" class="alert alert-danger">
            Password doesn't mactch.
        </div>
    </div>
    <button type="submit" class="btn btn-primary" [disabled]="!changePasswordForm.valid">Change password</button>
</form>